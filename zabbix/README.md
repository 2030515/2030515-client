# Zabbix Windows Agent Ver 5
### v1 14.06.2020
Компонент группы программного обеспечения 2030515.
Должен располагаться в c:\2030515. Это осознанный шаг, никаких %SystemDrive%, наша политика если системный диск не С - это ошибка подлежащая исправлению.
Здесь все, отвечающее за работу агента на windows клиентах.

### СХЕМА
- Заголовок ридми содержит Ver (версия заббикса агента, через точку версия ридми) и дата последнего изменения.
- В ридми пишу описание функционала + зависимости от стороннего софта.
- Документация к скриптам в комментариях самих скриптов, та же схема с конфигурационными файлами.
- Пометки к функционалу:
	-- задумка;
	-+ в разработке;
	++ функционал работает;

### ФУНКЦИОНАЛ
++ LLD обнаружеие накопителей и чтение с них SMART (см зависимости в c:\2030515\zabbix\conf\conf.d\smart-temp.conf).
++ LLD обнаружение датчиков температуры, датчиков Холла на кулерах.
++ Выбор датчиков для автообнаружения. Датчики в именах которых есть символ # не передаются на сервер.
	Для управления - остановить службу OpenHardwareMonitor, запустить его экзешник, на любой датчик правой кнопкой мыше - переименовать.
	Далее закрыть экзешник и запустить службу.
-- Определение процессора, материнской платы, моделей дисков, помещение этой инфы в инвентаризацию.

### Структура и описание
#### c:\2030515\set-zabbix.bat
Установщик и настройщик агента.
++ автоопределение установки х86 или х64;
++ при обновлении проверки на наличие имеющегося агента, уго удаление и установку нового;
-- автоматическое ковыряние файрвола.
++ автоматическая настрока OHM
-- автоматическая настрока smartmontools

#### c:\2030515\zabbix\zabbix server templates\
Шаблоны для сервера необходимые для поддержки функционала, реализованного в агенте

#### c:\2030515\zabbix\soft\dist\
Софт в виде дистрибутивов. Ставится или вручную, или автоматически с помощью set-zabbix.bat

#### c:\2030515\zabbix\soft\portable\
Софт работающий без установки, нужен для обработки скриптами, которые запускаются в UserParameter

#### c:\2030515\zabbix\soft\scripts\
Скрипты, отвечают за поставку агенту информации, которая передается на сервер. Они запускаются из .conf файлов

#### c:\2030515\bin
Исполняемые файлы агента, в этом каталоге никаких изменений не будет, только обновление экзешников.

#### c:\2030515\zabbix\conf\zabbix_agentd.conf
Конфигурационный файл заббикса. Все что отличается от дефолтной поставки объяснено в комментариях.
В этом файле оперируем только настройками, которве заббикс понимает из коробки. Всю конфу на самописные скрипты выносим в отдельный каталог, на который в основном файле конфигурации есть ссылка.

#### c:\2030515\zabbix\conf\conf.d
Каталог для дополнительных конфигов к агенту. Агент отсюда подхватывает любые .conf файлы.
